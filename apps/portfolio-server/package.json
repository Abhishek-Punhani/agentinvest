{
	"name": "@portfolio/server",
	"version": "1.0.0",
	"private": true,
	"description": "Portfolio Server",
	"scripts": {
		"setup": "python -m pip install -r requirements.txt && prisma generate",
		"prisma:generate": "prisma generate",
		"prisma:studio": "prisma studio",
		"dev": "PYTHONPATH=../..:../../shared/py:../../middleware:../../middleware/py:../../quant-stream python -m uvicorn main:app --reload --host 0.0.0.0 --port 8000",
		"celery": "echo '⚠️  Run from root: pnpm celery' to see all worker pools in separate panels",
		"celery:all": "pnpm run --parallel celery:trading celery:nse celery:news celery:lowrisk celery:allocation celery:market celery:general celery:streaming celery:regime celery:beat pathway:orders",
		"celery:trading": "CELERY_WORKER_RUNNING=1 PROMETHEUS_ENABLED=true PROMETHEUS_PORT=9101 WORKER_NAME=trading@localhost PYTHONPATH=../..:../../shared/py:../../middleware:../../middleware/py:../../quant-stream celery -A celery_app:celery_app worker --loglevel=info -Q trading --concurrency=4 --hostname=trading@%h --max-tasks-per-child=100 --prefetch-multiplier=1",
		"celery:nse": "CELERY_WORKER_RUNNING=1 PROMETHEUS_ENABLED=true PROMETHEUS_PORT=9102 WORKER_NAME=nse@localhost PYTHONPATH=../..:../../shared/py:../../middleware:../../middleware/py:../../quant-stream celery -A celery_app:celery_app worker --loglevel=info -Q nse_pipeline --concurrency=1 --hostname=nse@%h --max-tasks-per-child=10 --prefetch-multiplier=1",
		"celery:news": "CELERY_WORKER_RUNNING=1 PROMETHEUS_ENABLED=true PROMETHEUS_PORT=9107 WORKER_NAME=news@localhost PYTHONPATH=../..:../../shared/py:../../middleware:../../middleware/py:../../quant-stream celery -A celery_app:celery_app worker --loglevel=info -Q news_pipeline --concurrency=1 --hostname=news@%h --max-tasks-per-child=50 --prefetch-multiplier=1",
		"celery:lowrisk": "CELERY_WORKER_RUNNING=1 PROMETHEUS_ENABLED=true PROMETHEUS_PORT=9108 WORKER_NAME=lowrisk@localhost PYTHONPATH=../..:../../shared/py:../../middleware:../../middleware/py:../../quant-stream celery -A celery_app:celery_app worker --loglevel=info -Q low_risk_pipeline --concurrency=1 --hostname=lowrisk@%h --max-tasks-per-child=10 --prefetch-multiplier=1",
		"celery:allocation": "CELERY_WORKER_RUNNING=1 PROMETHEUS_ENABLED=true PROMETHEUS_PORT=9103 WORKER_NAME=allocation@localhost PYTHONPATH=../..:../../shared/py:../../middleware:../../middleware/py:../../quant-stream celery -A celery_app:celery_app worker --loglevel=info -Q allocations --concurrency=2 --hostname=allocation@%h --max-tasks-per-child=100 --prefetch-multiplier=1",
		"celery:market": "CELERY_WORKER_RUNNING=1 PROMETHEUS_ENABLED=true PROMETHEUS_PORT=9104 WORKER_NAME=market@localhost PYTHONPATH=../..:../../shared/py:../../middleware:../../middleware/py:../../quant-stream celery -A celery_app:celery_app worker --loglevel=info -Q market,tokens --concurrency=4 --hostname=market@%h --max-tasks-per-child=500 --prefetch-multiplier=1",
		"celery:general": "CELERY_WORKER_RUNNING=1 PROMETHEUS_ENABLED=true PROMETHEUS_PORT=9105 WORKER_NAME=general@localhost PYTHONPATH=../..:../../shared/py:../../middleware:../../middleware/py:../../quant-stream celery -A celery_app:celery_app worker --loglevel=info -Q general,risk,orders --concurrency=4 --hostname=general@%h --max-tasks-per-child=200 --prefetch-multiplier=1",
		"celery:streaming": "CELERY_WORKER_RUNNING=1 PROMETHEUS_ENABLED=true PROMETHEUS_PORT=9106 WORKER_NAME=streaming@localhost PYTHONPATH=../..:../../shared/py:../../middleware:../../middleware/py:../../quant-stream celery -A celery_app:celery_app worker --loglevel=info -Q streaming --concurrency=1 --hostname=streaming@%h --max-tasks-per-child=1 --prefetch-multiplier=1 --without-heartbeat --without-gossip",
		"celery:regime": "CELERY_WORKER_RUNNING=1 PROMETHEUS_ENABLED=true PROMETHEUS_PORT=9109 WORKER_NAME=regime@localhost PYTHONPATH=../..:../../shared/py:../../middleware:../../middleware/py:../../quant-stream celery -A celery_app:celery_app worker --loglevel=info -Q regime --concurrency=1 --hostname=regime@%h --max-tasks-per-child=10 --prefetch-multiplier=1",
		"celery:beat": "CELERY_WORKER_RUNNING=1 PYTHONPATH=../..:../../shared/py:../../middleware:../../middleware/py:../../quant-stream celery -A celery_app:celery_app beat --loglevel=info",
		"streaming:risk": "PYTHONPATH=../..:../../shared/py:../../middleware:../../middleware/py python -m workers.streaming_risk_monitor",
		"streaming:orders": "PYTHONPATH=../..:../../shared/py:../../middleware:../../middleware/py python -m workers.streaming_order_monitor",
		"pathway:orders": "PYTHONPATH=../..:../../shared/py:../../middleware:../../middleware/py python -m workers.pathway_order_monitor",
		"test": "python -c \"import sys; sys.path.insert(0, '../../shared/py'); sys.path.insert(0, '../../middleware/py'); sys.path.insert(0, '../..'); import pytest; pytest.main(['tests/', '-v', '--tb=short'])\"",
		"test:cov": "python -c \"import sys; sys.path.insert(0, '../../shared/py'); sys.path.insert(0, '../../middleware/py'); sys.path.insert(0, '../..'); import pytest; pytest.main(['tests/', '-v', '--tb=short', '--cov=.', '--cov-report=term-missing', '--cov-report=html'])\"",
		"test:watch": "python -c \"import sys; sys.path.insert(0, '../../shared/py'); sys.path.insert(0, '../../middleware/py'); sys.path.insert(0, '../..'); import pytest; pytest.main(['tests/', '-v', '--tb=short', '--watch'])\"",
		"test:unit": "python -c \"import sys; sys.path.insert(0, '../../shared/py'); sys.path.insert(0, '../../middleware/py'); sys.path.insert(0, '../..'); import pytest; pytest.main(['tests/', '-v', '--tb=short', '-m', 'not integration'])\"",
		"test:integration": "python -c \"import sys; sys.path.insert(0, '../../shared/py'); sys.path.insert(0, '../../middleware/py'); sys.path.insert(0, '../..'); import pytest; pytest.main(['tests/', '-v', '--tb=short', '-m', 'integration'])\"",
		"studio": "prisma studio --port 5555",
		"studio:kafka": "streamlit run ../../kafkaStudio.py"
	},
	"dependencies": {},
	"devDependencies": {}
}